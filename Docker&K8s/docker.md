
<br />    

사용법은 알고 있기 때문에 도커를 사용하는 의의, 도커 탄생 배경, 이전의 기술과의 차이점   
컨테이너나 가상화에 대한 개념을 확실히 이해하고 쿠버네티스까지 학습해보자.       

자세한 개념 정리는 노션을 활용하여 정리   
* 01 도커의 기초: <https://www.notion.so/01-19210476d5814fd784e42d6fd0a221ea>
* 02 도커 컨테이너 배포: <https://www.notion.so/02-6fac8003d1df4962b95dac45531e3d6c>
* 03 기존 가상화와 컨테이너 가상화 기술: <https://www.notion.so/c65901cba887456da77675b6b0e6185a>   
<br />        




# 가상화란?
가상화란 물리적인 하드웨어 장치를 논리적인 객체로 추상화하는 것을 의미한다.     
하나의 하드웨어를 여러개 처럼 동작시키거나 반대로 여러 개의 장치를 묶어 하나인 것처럼 사용자에게 공유자원으로 제공할 수 있다.

가상화의 대상이 되는 컴퓨터 자원은 프로세서(CPU), 메모리, 스토리지, 네트워크를 포함하여    
이들을 쪼개거나 합쳐서 더 효율적으로 사용할 수 있게 하고 분산처리를 가능하게 할 수 있다.


<br />      
<br />      



# 왜 Docker가 주목받는가?   
### 기존의 가상화   
VM별로 OS가 동작하기 때문에 VM 동작에서 사용되는 오버헤드가 크다.   

<br />  

### 컨테이너 가상화   
컨테이너 가상화 기술은 Host OS 상에서 논리적인 구역을 나누어 특정 어플리케이션의 동작을 위한 라이브러리와    
애플리케이션 (OS나 참조되는 App)을 컨테이너에 넣고, 개별 서버처럼 사용하는 것이 컨테이너 가상화이다.       
VM 별로 OS가 없고 VM을 구동시키기 위한 OS부팅도 없기 때문에 다른 가상화 기술에 비해 가볍고 빠른게 컨테이너 가상화 기술의 특징이다.       

기본 하드웨어에서 격리된 환경 내에서 애플리케이션을 배치하는 방법이라는 것은 같지만 얼마나 격리시키는지의 차이가 있다. 

<br />      
<br />      


# Docker란?           
도커(Docker)는 컨테이너형 가상화 기술을 구현하기 위한 상주 애플리케이션과 이 애플리케이션을 조작하기 위한 명령행 도구로 구성되는 프로덕트다.        
리눅스 컨테이너 기반으로하는 오픈소스 가상화 플랫폼이기 때문에 LXC로 쉽게 시스템 또는 어플리케이션 컨테이너들을 생성/관리하여 컨테이너를 격리시킬 수 있었다.      

즉 도커를 구현하는 기술은 다음과 같다. 
* 네임스페이스
* Chroots 
* CGroups




<br />      
<br />     

# 컨테이너란? 
컨테이너는 어떤 환경에서나 실행하기 위해 필요한 모든 요소를 포함하는 소프트웨어 패키지이다.           
컨테이너는 이러한 방식으로 운영체제를 가상화하며 프라이빗 데이터 센터에서 퍼블릭 클라우드 또는 개발자의 개인 노트북에 이르기까지 어디서나 실행된다.        


<br />      
<br />       


# 컨테이너들을 어떻게 격리시킬 수 있는가?   

LXC 덕분이다.    
LXC는 리눅스 커널 컨테이너 기능을 위한 사용자영역 인터페이스이다.     

강력한 API와 간단한 도구들을 통해 리눅스 사용자가 쉽게 시스템 또는 어플리케이션 컨테이너들을 생성/관리할 수 있게 해준다.     
<br />    

> 도커에서 어떻게 리눅스 기능을?      
> Docker란 Go언어로 작성된 리눅스 컨테이너 기반으로하는 오픈소스 가상화 플랫폼이다.    


<br />      
<br />      

# 도커의 아키텍처   

<img width="1114" alt="스크린샷 2021-07-29 오후 1 35 32" src="https://user-images.githubusercontent.com/33855307/127432279-56d5d3bb-f530-4399-b326-d114b19bf4d2.png">

<br />   



### (1) 도커 데몬    
도커 데몬은 클라이언트인 도커 커맨드의 명령을 받아들여서 도커 오브젝트인 이미지, 컨테이너, 볼륨, 네트워크 등을 관리한다.    
도커 데몬은 네트워크 너머에 있는 원격 클라이언트로부터 요청을 받는 것도 가능하다.   

<br />   

### (2) 도커 클라이언트   
도커 커맨드는 컨테이너를 조작하는 커맨드 라인을 유저 인터페이스로 도커 데몬의 클라이언트다.   
도커 커맨드는 도커 API를 사용하여 도커 데몬에 요청을 보낸다.   

```
docker build: 베이스 이미지에 기능을 추가하여 새로운 이미지를 만들 때 사용   
docker pull: 레지스트리에서 이미지를 로컬에 다운로드할 때 사용
docker run: 이미지를 바탕으로 컨테이너 실행
```

<br />   

### (3) 이미지    
이미지는 읽기 전용인 컨테이너의 템플릿을 말한다.    
컨테이너를 기동하기 위한 실행 파일과 설정 파일의 묶음이라고 볼 수 있다.   
컨테이너를 실행하면 이미지에 담긴 미들웨어나 애플리케이션이 설정에 따라 기동한다.   
도커 허브에 등록된 이미지를 다운받으면 특별한 설치 없이 젠킨스 서버를 바로 기동할 수 있다.  

대부분의 이미지는 다른 이미지에 기반하여 만들어진다.    
예) 웹 서버인 Nginx의 컨테이너는 리눅스 배포판 중 하나인 데비안에 기반하여 만들어졌다.    
이미지를 만들 때는 기반 이미지와 설치 스크립트 등을 Dockerfile에 기재하여 빌드한다.    

<img width="1244" alt="스크린샷 2021-07-29 오후 3 53 04" src="https://user-images.githubusercontent.com/33855307/127445584-ac081bba-e25a-4f0a-a120-c000692aca6b.png">
<br />   

제일 먼저 Dockerfile은 (1) `docker build` 명령어를 통해 읽혀지며,    
(2) 기반이 되는 데비안 이미지가 로컬에 없으면 레지스트리로부터 다운받는다.   
(3) 데비안 이미지를 컨테이너로 기동하고 (4) Nginx 패키지를 설치하고 설정파일을 추가한 후   
(5) 새로운 이미지 Nginx로 로컬 레포지토리에 저장한다.   

<br />   

### (4) 컨테이너    
컨테이너는 하나의 프로세스라고 볼 수 있다.    
리눅스의 네임스페이스나 컨트롤 그룹을 통해 다른 프로세스들과 완전히 분리되어 실행되는 프로세스인 것이다.    
컨테이너는 정지된 상태로도 관리되기 때문에 '실행 가능한 이미지의 인스턴스'라고 할 수 있다.   

실행 상태의 컨테이너는 IP 주소를 가지는 하나의 독립된 서버처럼 동작한다.    
컨테이너의 IP 주소와 포트번호로 온 요청은 컨테이너 내의 프로세스로 연결된다.    


<br />   


### (5) 도커 레지스트리    
도커 레지스트리는 컨테이너의 이미지가 보관되는 곳이다.    
도커는 기본으로 도커 허브에 있는 이미지를 찾도록 설정되어 있다.   

<br />       

