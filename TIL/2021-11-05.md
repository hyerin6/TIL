### I/O bound 애플리케이션도 서버를 늘리면 성능을 올릴 수 있을까?

CPU bound 애플리케이션은 스케일아웃으로 개선해봤다. 

I/O bound 애플리케이션을 스케일 아웃하면 서버들은 다음과 같은 구조를 가질 것이다. 

<br />

![스크린샷 2021-11-05 오후 4 21 57](https://user-images.githubusercontent.com/33855307/140473236-6b13a91f-4686-479e-9ce2-88fb7fc54d2d.png)

<br />

하지만 이런 구조는 서버끼리 각자의 데이터를 실시간으로 공유할 수 없다. 

이 문제를 위해서 DB를 사용한다. 

그런데 서버를 아무리 늘려도 DB의 성능이 낮으면 전체 서버의 성능은 DB와 동일해진다. 

CPU가 하드디스크에 직접 붙으면 속도가 하드디스크 쪽으로 맞춰지는 것도 같은 현상이다. 

이를 **병목현상**이라고 한다. 


<br />

그렇다면 DB도 NGINX을 사용하여 로드밸런싱을 적용하면 안될까?

DB는 각 저장소의 데이터가 실시간으로 동일하다고 보장되지 않기 때문에 

그런 방법은 데이터의 정합성이 보장되지 않는다. 

위 구조에서 DB의 성능에 의존적인 부분을 줄여서 전체 서비스의 성능을 올려 더 많은 트래픽을 처리할 수 있도록 해야 한다. 

<br />

간단하게 한줄 게시판을 구현해 성능을 개선해보자. 

<br />
<br />

### 한 줄 게시판 
* 글 작성 
* 글 목록 (페이징)
* 글 번호로 조회
* 글 내용으로 검색 

<br />

일반적으로는 바로 DB에 insert, select 하는데 (캐싱 없다고 가정)

사용자가 응답을 기다리다 새로고침을 눌렀다고 가정해보자. 

계속해서 DB에 select 쿼리가 날아간다. 

<br />
<br />

### 핵심 
중요한 것은 **어디가 시스템의 병목인가?** 이다. 

병목이 아닌 곳의 성능을 올리거나 단순히 서버의 수를 늘린다고 전체 시스템의 성능을 개선하는데 좋은 방법은 아니다. 

어디가 이 시스템의 병목인지 찾아서 개선해야 한다. 











