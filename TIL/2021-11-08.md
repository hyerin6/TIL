## ES 클러스터  

#### 샤드
각각의 머신에 데이터를 나눠서 넣어두는 것

각각의 머신 = 노드 

더 많은 CPU, 메모리, 디스크 성능으로 빠른 검색 가능 

노드를 늘리는 것 = 스케일 아웃 = 샤드


<br />

#### 레플리카  
레플리카 = 복사본 

특정 노드에 문제가 발생하여 내려갔을 때 

다른 노드에 복사본이 있기 때문에 서비스는 계속 가능하다. 

<br />

#### ES 디비와 다른점 

* ES는 실시간 처리가 불가능하다. (짧은 시간임)

* 트랜잭션과 롤백을 지원하지 않는다. 

* 문서를 업데이트할 수 없다.   
업데이터 API가 있으나 내부적으로 업데이트 처리가 아니라 삭제한 후 다시 만드는 작업이다. 

<br />

#### ES 검색 결과 
ES는 기본적으로 검색 결과를 10,000개 까지만 반환하도록 되어있다. 

<br />


#### DB 보다 느린 ES 결과 
샤드가 너무 적으면 DB보다 느리게 검색될 수 있다. 

샤드를 늘려야 한다. 

<br />

#### nginx > rabbitmq > es 

테스트를 위해서 데이터를 넣고 있는데 이 과정은 비효율적이다. 

기존에 인덱스에 있던 데이터를 빠르게 다른 인덱스로 색인 할 수 있는 reindex API를 사용하자. 




