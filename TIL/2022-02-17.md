### elastic search 샤드 개수, 크기 정하기   
엘라스틱서치에서 한번 생성된 인덱스의 샤드는 수정이 불가능하다.     
따라서 생성 시 적절한 샤드의 수를 정해야 한다.   

**샤드 종류**     
* primary shard                  
실제 CRUD를 제공하는 샤드, 일반적으로 샤드라고 부르는 것은 프라이머리 샤드를 말한다.   

* replica shard      
장애 복구를 위한 프라이머리 샤드의 복제본, 하지만 장애 복구 뿐만 아니라 read 분산에도 활용된다.     

<br />

**샤드 개수 변경을 허용하지 않는 이유는 뭘까?**    
엘라스틱서치의 샤드는 내부적으로 루씬의 Index와 대응된다.   
각가의 샤드와 루씬 인덱스는 1:1로 대응되고, 이 샤드들이 모여서 하나의 인덱스를 구성한다.      

루씬은 단일 머신에서 동작하는 Stand Alone 검색엔진이고, 샤드 내부에 이러한 독립적인 루씬 라이브러리를 각각 갖고 있는 것이다.    
따라서 내부의 루씬은 외부 엘라스틱서치가 다른 샤드들과 더 큰 데이터셋을 가지고 인덱스를 구성한다는 것을 전혀 모른다.   

이러한 상태에서 샤드의 개수를 변경하면 샤드 내부의 각각의 루씬이 갖고 있는 데이터를 모두 재조정하는 것과 같다.   
이러한 특징 때문에 엘라스틱서치에서 샤드의 개수 변경은 불가능하며, 샤드의 변경이 필요한 경우   
새로운 인덱스를 생성할 수 있도록 ReIndex API를 사용할 수 있다.     









