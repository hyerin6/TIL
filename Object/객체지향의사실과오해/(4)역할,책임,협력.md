# 역할, 책임, 협력   

## 협력   
협력은 한 사람이 다른 사람에게 도움을 요청할 때 시작된다.   
요청을 받은 사람은 일을 처리한 후 요청한 사람에게 필요한 지식이나 서비스를 제공하는 것으로 요청에 응답한다.    

앨리스의 이야기로 다시 돌아가보자.  

```text
하트 여왕이 만든 파이를 훔쳐 달아나다 붙잡힌 하트 잭에 대한 공판이 열렸다.  

등장인물들이 모두 법정에 모여 하트 잭에게 죄가 있는지 판단하고 
만약 죄가 있다면 어떤 형량을 부과할지 결정한다.  
```

객체지향 패러다임으로 재판 장면을 바라보자.   

객체지향의 세계는 동일한 목적을 달성하기 위해 협력하는 객체들의 공통체이다.   

재판장에 있는 토끼, 모자 장수라 불리는 객체들은 하트 잭을 재판하기 위해 서로 협력한다.   

즉 하트 잭의 재판이라는 동일한 목적을 달성하기 위해 협력하고 있는 것이다.   

<br />  

앨리스의 이야기에서 왕이 모자 장수로부터 증언을 듣는 과정을 요청과 응답이라는 관점에서 살펴보자.   

* 누군가가 왕에게 재판을 요청함으로써 재판이 시작된다. 
* 왕이 토끼에서 증인을 부를 것을 요청한다. 
* 왕의 요청에 토끼는 모자 장수에게 증인석으로 입장할 것을 요청한다. 
* 모자 장수의 증인석 입장은 토끼의 요청대한 응답이다.   
* 이제 왕은 모자 장수에게 증언을 요청한다. 
* 모자 장수는 증언으로 왕의 요청에 응답한다.  


어떤 등장인물들이 특정한 요청을 받아들일 수 있는 이유는   
그 요청에 대한 적절한 방식으로 응답하는 데 필요한 지식과 행동 방식을 가지고 있기 때문이다.    

그리고 그 요청과 응답은 협력에 참여하는 객체가 수행할 책임을 정의한다. 

<br />
<br />  

## 책임   
왕은 `재판을 수행하라`는 요청에 응답해야 하므로 `재판을 수행` 하는 책임을 지게 된다.     
토끼는 `목격자를 불러오라`는 요청에 응답해야 하므로 `목격자를 불러올` 책임을 진다. 

결국 어떤 대상에 대한 요청은 그 대상이 요청을 처리할 책임이 있음을 암시한다.   

책임은 객체에 의해 정의되는 응집도 있는 행위의 집합으로 객체가 알아야 하는 정보와 객체가 수행할 수 있는 행위에 대해 개략적으로 서술한 문장이다.   

즉 객체의 책임은 '객체가 무엇을 알고 있는가'와 '무엇을 할 수 있는가'로 구성된다.   

<br />

객체의 책임을 이야기할 때 일반적으로 외부에서 접근 가능한 공용 서비스의 관점에서 이야기 한다.    
즉 책임은 객체의 외부에 제공할 수 있는 정보와 외부에 제공할 수 있는 서비스의 목록이다.    
따라서 책임은 객체의 공용 인터페이스를 구성한다.   
공용 인터페이스는 캡슐화의 원리로 이어진다.   

<br />
<br />  

## 역할   
어떤 객체가 수행하는 책임의 집합은 객체가 협력 안에서 수행하는 역할을 암시한다.      
그렇다면 그냥 왕, 모자 장수라고 부르지 않고 왕을 판사라고 부르고 모자 장수를 증인이라고 불러서 복잡하게 만드는 이유는 무엇일까?   
그것은 역할이 재사용 가능하고 유연한 객체지향 설계를 낳는 매우 중요한 구성요소이기 때문이다.  
앨리스의 재판 과정을 다시 살펴보자.  


```text
1) 모자 장수는 증언을 마쳤다. 
2) 왕은 토끼에게 다음 증인을 불러오라 요청했다. 
3) 토끼는 다음 증인 요리사를 불렀다. 
4) 요리사의 증언이 끝났다. 
5) 왕은 머리가 아파 여왕에게 심문을 도와달라고 요청했다. 
6) 여왕이 다음 증인을 요청 후, 토끼는 앨리스를 불렀다. 
```

앨리스가 증언하는 장면에 이르면 왕은 여왕으로, 증인은 모자 장수에서 앨리스로 바뀐다.   
재판이 이뤄지는 세 가지 과정 모두 완벽하게 동일한데 차이점은 `[왕, 여왕]`, `[모자 장수, 앨리스]`가 협력에 참여한다는 것이다.   

이 세 개의 협력을 별도로 관리하고 유지해야 하는가?   
만약 재판 과정이 바뀐다면?    


서로 다른 세 개의 재판 과정, 즉 세 개의 협력이 주어져 있다.   
문제는 협력에 참여하는 등장인물들을 제외한 나머지 과정이 유사해 하나의 협력으로 다루고 싶다는 것이다.    

방법은 간단하다.     
재판이라는 협력 과정 속에서 '판사'와 '증인'이라는 역할(role)을 사용하면   
세 가지 협력을 모두 포괄할 수 있는 하나의 협력으로 추상화할 수 있다.       

<br />

<img width=60% src="https://user-images.githubusercontent.com/33855307/142867780-b132781e-7a8e-48f4-b129-fd3a4cf9b3d4.jpeg">

<br />


역할은 협력 내에서 다른 객체로 대체할 수 있음을 나타내는 일종의 표식이다.   
협력 안에서 역할은 `이 자리에 해당 역할을 수행할 수 있는 어떤 객체라도 대신할 수 있음`을 말하는 것과 같다.   

역할을 대체하기 위해서 각 역할이 수신할 수 있는 메시지를 동일한 방식으로 이해해야 한다.   
`판사` 역할을 수행할 수 있는 대체자는 `재판하라` 라는 메시지를 동일하게 이해하고 처리할 수 있어야 한다.    
따라서 역할을 대체할 수 있는 객체는 동일한 메시지를 이해할 수 있는 객체로 한정된다.   


역할의 개념을 사용하면 유사한 협력을 추상화해서 인지 과부하를 줄일 수 있다.    
또한 다양한 객체들이 협력에 참여할 수 있기 때문에 협력이 좀 더 유연해지며 다양한 객체들이 동일한 협력에 참여할 수 있기 때문에 재사용성이 높아진다.   
역할은 객체지향 설계의 단순성, 유연성, 재사용성을 뒷받침하는 핵심 개념이다.  

<br />

